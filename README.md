Primeiro pensamento:
Armazenar estado em arquivos.
